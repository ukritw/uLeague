{{extend 'layout.html'}}

<script>
    $(function() {
        $( "#sports_search" ).autocomplete({
            source: "sports_complete.json",
            minLength: 1
        }); 
    });
</script>

{{#=user_participations}}

{{=form}}

<h4>Upcoming Events</h4>

<ul>
{{for i, event in enumerate(events):}}
    {{if i==items_per_page: break}}
    {{event = db(db.event.id == event).select().first()}}
        <div class="event_border">
            <ul style="list-style-type:none;">
                <a href="{{=URL('event', args=event.id)}}">
                    {{=H6(event.name)}}
                </a>
                <hr>
                {{=LI(event.date_time)}}
                {{=LI(event.location)}}
                {{=LI(event.host.first_name+' '+event.host.last_name)}}
                {{=LI(event.posting_date)}}
                {{=LI(event.host.gender)}}

                {{if (event.host.id) == (auth.user_id): }}
                    {{=A('Delete Event', _href=URL('delete', args=[event.id]))}} <br/>
                    {{=A('Edit Event', _href=URL('event_edit', args=[event.id]))}} <br/>
                    
                {{elif user != None: }}
                    {{=P('drop down menu')}}
                    {{#participation_form}}
                    
                {{else: }}
                    
                    {{=A('Join', _href=URL('join', args=[event.id, auth.user_id]))}} <br/>
                {{pass}}
            </ul>
      </div>
   
{{pass}}
</ul>
<br>
<br>


{{= A('Create New Event', _href=URL('create')) }}
<br>
{{= A('View your profile', _href=URL('userinfo',args=user.username)) }}
<br>

<!-- <h3> Search for events </h3>
<div class="ui-widget">
{{=search_form}}<br/>
{{=target_div}}
</div> -->

<!-- <div style="float:left;" class="span8">
{{if page:}}
<a href="{{=URL(args=[page-1])}}">previous</a>
{{pass}}

{{if len(events)>items_per_page:}}
<a href="{{=URL(args=[page+1])}}">next</a>
{{pass}}
</div> -->

<!-- PAGINATION -->
<div class="span12">
    <div class="span2 offset5 pagination">
        <ul>
        {{if page:}}
            <li><a href="{{=URL(args=[page-1])}}">previous</a></li>
        {{pass}}

        {{if len(events)>items_per_page:}}
            <li><a href="{{=URL(args=[page+1])}}">next</a></li>
        {{pass}}
        </ul>
    </div>
</div>
